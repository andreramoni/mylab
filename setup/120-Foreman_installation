VCENTER:
- Deploy a VM from CentOS7 template
- Name it foreman.ext.lab
- Edit the VM and set vcpus to 4 and 8Gb of ram
- Add another NIC on prov1 network
- Power on

VM:
- Logon onto the  vm

- Use nmtui to configure the network as follow:
  Static 192.168.12.50/24 on first network. Name it ext.
  Static 10.255.0.1/24 on second network. Name it prov.
  Set the hostname to foreman.ext.lab

- Reboot
  reboot 

- Log into the VM and apply:
  echo "192.168.12.50 foreman.ext.lab foreman" >> /etc/hosts


- Reboot
  reboot

- Take a snapshot. Name it "Linux OK"

OPT between Foreman or Katello and follow respective instructions bellow


FOREMAN INSTALL:

KATELLO NIGHTLY INSTALL:  
https://theforeman.org/plugins/katello/nightly/installation/index.html

If using katello nightly as I use *for testing*,
cd /etc/yum.repos.d && sed -i s/gpgcheck=1/gpgcheck=0/g *

# removed options:
  --enable-foreman-plugin-discovery \
  --enable-foreman-proxy-plugin-discovery \
  --foreman-proxy-plugin-discovery-install-images true \


Create a file with:

foreman-installer --scenario katello \
  --foreman-admin-password adminadmin \
  --enable-foreman-proxy-plugin-ansible \
  --enable-foreman-plugin-discovery \
  --enable-foreman-proxy-plugin-discovery \
  --foreman-proxy-plugin-discovery-install-images true \
  --enable-foreman-plugin-ansible \
  --enable-foreman-compute-vmware \
  --enable-foreman-compute-ec2 \
  --enable-foreman-compute-gce \
  --enable-foreman-plugin-remote-execution \
  --enable-foreman-proxy-plugin-remote-execution-ssh \
  --foreman-initial-location Home \
  --foreman-initial-organization RLabs \
  --foreman-proxy-tftp=true \
  --foreman-proxy-tftp-servername=10.255.0.1 \
  --foreman-proxy-dhcp=true \
  --foreman-proxy-dhcp-interface=ens224 \
  --foreman-proxy-dhcp-gateway=10.255.0.1 \
  --foreman-proxy-dhcp-nameservers="192.168.12.2" \
  --foreman-proxy-dhcp-range="10.255.10.1 10.255.100.254" \
  --foreman-proxy-dns=false

(in the nightly build at this date, I needed to run it twice because the first run returned some errors, but the second one finished ok)

About organizations and locations:
I still don´t like them. But maybe it´s because I starteusing foreman without katello. I still prefer to not use locations and organizations even when managind several datacenter and/or cloud. But we can only disable location, its not possible to disable organization.

 
- Run puppet agent
. /etc/profile && puppet agent -t

- Take a snapshot and name it "Foreman installed"

- Make puppet autosign all certificates:
  echo "*" >> /etc/puppetlabs/puppet/autosign.conf

 
