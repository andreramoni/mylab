VCENTER:
- Deploy a VM from CentOS7 template
- Name it foreman.ext.lab
- Edit the VM and set vcpus to 4 and 6Gb of ram
- Add another NIC on mgmt network
- Power on

VM:
- Logon onto the  vm

- Use nmtui to configure the network as follow:
  Static 192.168.12.50 on first network. Name it ext.
  Static 10.255.0.254 on second network. Name it mgmt.
  Set the hostname to foreman.ext.lab

- Reboot
  reboot 

- Log into the VM and apply:
  echo "192.168.12.50 foreman.ext.lab foreman" >> /etc/hosts
  cd /etc/sysconfig/network-scripts ; mv ifcfg-ens192 ifcfg-ext


- Reboot
  reboot

- Take a snapshot. Name it "Linux OK"

OPT between Foreman or Katello and follow respective instructions bellow


FOREMAN INSTALL:
- Go to www.theforeman.org, click on get started and follow the steps.
- First step is to install puppet repo
- Second is the epel repo
- Third is the foreman repo
- Fourth is the foreman installer
- Run foreman-installer non-interactive mode just setting the initial password
  time foreman-installer --foreman-admin-password adminadmin
  (it should take around 6 minutes)

KATELLO 3.6 INSTALL:  
- Install all repos:
  yum -y localinstall http://fedorapeople.org/groups/katello/releases/yum/3.6/katello/el7/x86_64/katello-repos-latest.rpm
  yum -y localinstall http://yum.theforeman.org/releases/1.17/el7/x86_64/foreman-release.rpm
  yum -y install https://yum.puppetlabs.com/puppet5/puppet5-release-el-7.noarch.rpm
  yum -y localinstall http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
  yum -y install foreman-release-scl python-django

- Install katello:
  yum -y install katello

Create a file with:

foreman-installer --scenario katello \
  --foreman-admin-password adminadmin \
  --enable-foreman-plugin-setup \
  --enable-foreman-proxy-plugin-openscap \
  --enable-foreman-plugin-openscap \
  --enable-foreman-proxy-plugin-ansible \
  --enable-foreman-plugin-hooks \
  --enable-foreman-plugin-ansible \
  --enable-foreman-plugin-discovery \
  --enable-foreman-proxy-plugin-discovery \
  --foreman-proxy-plugin-discovery-install-images true \
  --enable-foreman-compute-vmware \
  --enable-foreman-compute-ovirt \
  --enable-foreman-compute-ec2 \
  --enable-foreman-compute-gce \
  --enable-foreman-plugin-default-hostgroup \
  --enable-foreman-plugin-remote-execution \
  --enable-foreman-proxy-plugin-remote-execution-ssh \
  --foreman-initial-location HomeLab \
  --foreman-initial-organization RLabs

foreman-installer \
  --enable-foreman-proxy \
  --foreman-proxy-tftp=true \
  --foreman-proxy-tftp-servername=10.255.0.2 \
  --foreman-proxy-dhcp=true \
  --foreman-proxy-dhcp-interface=ens224 \
  --foreman-proxy-dhcp-gateway=10.255.0.1 \
  --foreman-proxy-dhcp-nameservers="192.168.12.2" \
  --foreman-proxy-dns=false \
  --foreman-proxy-content-parent-fqdn=https://katello.ext.lab \
  --foreman-proxy-oauth-consumer-key=NtRN6s2xWrBsntaBgsjCXt8CWY8PJCLD \
  --foreman-proxy-oauth-consumer-secret=bGBWZWDfxVvWTqWF2T8SMRkZDihcNiow

- Take a snapshot and name it "Foreman installed"

- Make puppet autosign all certificates:
  echo "*" >> /etc/puppetlabs/puppet/autosign.conf

 
